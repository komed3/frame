class VideoSearch{constructor(){this.form=document.querySelector(".frame-search--form"),this.empty=document.querySelector(".frame-search--empty"),this.loader=document.querySelector(".frame-search--loader"),this.results=document.querySelector(".frame-search--results-grid"),this.more=document.querySelector(".frame-search--more"),this.query=null,this.initEventHandlers()}initEventHandlers(){this.form.addEventListener("submit",this.submit.bind(this)),this.form.querySelectorAll("select").forEach((e=>e.addEventListener("change",this.submit.bind(this))))}async submit(e){e.preventDefault();const t=Object.fromEntries(new FormData(this.form));if(JSON.stringify(t)===JSON.stringify(this.query))return;this.query=t;const r=await fetch("/api/search",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.query)});if(!r.ok)return;const{results:s,total:i,offset:n,limit:o}=await r.json()}}document.addEventListener("DOMContentLoaded",(()=>new VideoSearch));