class VideoUploader{constructor(){this.container=document.querySelector(".upload-container"),this.dropArea=this.container.querySelector(".file-drop-area"),this.fileInput=this.container.querySelector('[name="video"]'),this.preview=this.container.querySelector(".video-preview"),this.previewPlayer=this.preview.querySelector(".preview-player"),this.error=this.container.querySelector(".upload-error"),this.progress=this.container.querySelector(".upload-progress"),this.actions=this.container.querySelector(".form-actions"),this.initEventHandlers()}initEventHandlers(){["dragenter","dragover","dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,(e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}))})),["dragenter","dragover"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.add("dragover")}))})),["dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.remove("dragover")}))})),this.dropArea.addEventListener("drop",(e=>{const t=e.dataTransfer.files[0];t&&t.type.startsWith("video/")?this.handleFileSelect(t):this.showError("Wrong file type! Video formats only.")})),this.fileInput.addEventListener("change",(e=>{const t=e.target.files[0];t&&t.type.startsWith("video/")?this.handleFileSelect(t):this.showError("Wrong file type! Video formats only.")})),this.container.querySelector(".change-video").addEventListener("click",(()=>location.reload())),this.container.addEventListener("submit",(e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.handleUpload()}))}handleFileSelect(e){const t=this.preview.querySelector(".file-info");t.querySelector(".name").textContent=e.name,t.querySelector(".size").textContent=formatFileSize(e.size);const r=URL.createObjectURL(e);this.previewPlayer.src=r,this.previewPlayer.load(),this.dropArea.classList.add("hidden"),this.preview.classList.remove("hidden"),this.error.classList.add("hidden")}showError(e){this.error.classList.remove("hidden"),this.error.querySelector(".message").textContent=e}async handleUpload(){new FormData(this.container);this.progress.classList.remove("hidden"),this.error.classList.add("hidden"),this.actions.classList.add("hidden");try{}catch{}}}document.addEventListener("DOMContentLoaded",(()=>new VideoUploader));